{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/chrish0w/FIT3179/refs/heads/main/docs/aggregated_by_year_grouped.csv",
    "format": {
      "type": "csv"
    }
  },
  "title": "National Housing Loan Activity Over Time",
  "width": 800,
  "height": 400,
  "encoding": {
    "x": {
      "field": "Year",
      "type": "ordinal",
      "title": "Year",
      "axis": {
        "labelAngle": -45 
      }
    },
    "y": {
      "field": "Loan_Commitments",
      "type": "quantitative",
      "title": "Total Number of Mortgage Approvals"
    }
  },
  "layer": [
    {
      "mark": {
        "type": "line",
        "color": "red",
        "clip": true
      }
    },
    {
      "transform": [
        {"filter": {"selection": "hover"}}
      ],
      "mark": "point"
    },
    {
      "mark": {
        "type": "rule",
        "clip": true
      },
      "encoding": {
        "opacity": {
          "condition": {"value": 0.3, "selection": "hover"},
          "value": 0
        },
        "tooltip": [
          {"field": "Year", "type": "quantitative"},
          {"field": "Loan_Commitments", "type": "quantitative", "title": "Total Number of Mortgage Approvals"}
        ]
      },
      "selection": {
        "hover": {
          "type": "single",
          "fields": ["Year"],
          "nearest": true,
          "on": "mouseover",
          "empty": "none",
          "clear": "mouseout"
        }
      }
    }
  ]
}
